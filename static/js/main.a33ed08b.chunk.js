(this.webpackJsonptest1=this.webpackJsonptest1||[]).push([[0],{26:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(4),a=n.n(s),i=(n(26),n(13)),o=n.n(i),l=n(14),j=n(3),u=n(21),d=n(19),b=n(10),O=n(11),v=n.n(O),h=n(16),f=n.n(h),x=n(17),p=n.n(x),m=n(18),g=n.n(m),y=n(0);var S=function(e){e.lat,e.lng;var t=e.onClick,n=e.id,c=null;return 8===n?c=v.a:10===n?c=p.a:12===n?c=f.a:15===n&&(c=g.a),Object(y.jsx)("div",{onClick:t,children:Object(y.jsx)(b.Icon,{icon:c,className:"location-icon"})})};var k=function(e){var t=e.info;return Object(y.jsxs)("div",{className:"location-info",children:[Object(y.jsx)("h2",{children:"Event Location Info"}),Object(y.jsxs)("ul",{children:[Object(y.jsxs)("li",{children:["ID: ",Object(y.jsx)("strong",{children:t.id})]}),Object(y.jsxs)("li",{children:["TITLE: ",Object(y.jsx)("strong",{children:t.title})]})]})]})},C=r.a.createContext();function E(){return Object(c.useContext)(C)}function I(e){var t=e.children,n=Object(c.useState)([]),r=Object(j.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(null),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(null),b=Object(j.a)(d,2),O={eventData:s,setEventData:a,selectedEvent:l,setSelectedEvent:u,reRenderMarkers:b[0],setReReMarkers:b[1]};return Object(y.jsx)(C.Provider,{value:O,children:t})}function w(e){var t=e.center,n=e.eventData,r=E().selectedEvent,s=Object(c.useRef)(),a=Object(c.useState)(1),i=Object(j.a)(a,2),o=i[0],l=i[1],b=Object(c.useState)(null),O=Object(j.a)(b,2),v=O[0],h=O[1],f=Object(c.useState)(null),x=Object(j.a)(f,2),p=x[0],m=x[1],g=Object.keys({8:"Wildfires",10:"Severe Storms",12:"Volcanoes",15:"Sea and Lake Ice"});g=g.map((function(e){return Number(e)}));var C=n.map((function(e){return{type:"Feature",properties:{cluster:!1,eventKey:e.id,eventTitle:e.title,eventType:e.categories[0].id},geometry:{type:"Point",coordinates:[e.geometries[0].coordinates[0],e.geometries[0].coordinates[1]]}}})),I=Object(d.a)({points:C,bounds:v,zoom:o,options:{radius:75,maxZoom:20}}),w=I.clusters,T=I.supercluster;return Object(c.useEffect)((function(){if(null!==r){var e=Object(j.a)(r.geometries[0].coordinates,2),t=e[0],n=e[1];s.current.panTo({lat:n,lng:t}),s.current.setZoom(10)}}),[r]),Object(y.jsxs)("div",{className:"map-container",children:[Object(y.jsx)(u.a,{bootstrapURLKeys:{key:"AIzaSyAvnw4cvFPycl-iIqps2k-Gs80zIxI937U"},center:t,zoom:o,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var t=e.map;s.current=t},onChange:function(e){var t=e.zoom,n=e.bounds;l(t),h([n.nw.lng,n.se.lat,n.se.lng,n.nw.lat])},onClick:function(){m(null)},onDrag:function(){m(null)},children:w.map((function(e){var t=Object(j.a)(e.geometry.coordinates,2),n=t[0],c=t[1],r=e.properties,a=r.cluster,i=r.point_count,o=e.properties.eventType;if(a){var l=Math.round(i/C.length*100),u=Math.min(10*l,40);return Object(y.jsx)("section",{lat:c,lng:n,children:Object(y.jsx)("div",{className:"cluster-marker",style:{width:u+l+"px",height:u+l+"px"},onClick:function(){var t=Math.min(T.getClusterExpansionZoom(e.id),20);s.current.setZoom(t),s.current.panTo({lat:c,lng:n})},children:i})},e.id)}if(-1!==g.indexOf(o)&&2===e.geometry.coordinates.length)return Object(y.jsx)(S,{lat:c,lng:n,id:o,onClick:function(){m({id:e.properties.eventKey,title:e.properties.eventTitle})}},e.properties.eventKey)}))}),p&&Object(y.jsx)(k,{info:p})]})}w.defaultProps={center:{lat:29.305561,lng:-3.981108}};var T=w;var L=function(e){return Object(y.jsxs)("div",{className:"header-bar",children:[Object(y.jsx)(b.Icon,{icon:v.a})," Xtreme Weather Events"]})};var N=function(e){return Object(y.jsx)("div",{className:"loader-container",children:Object(y.jsx)("div",{className:"loader"})})},R=n(20);var M=function(e){var t=E(),n=t.eventData,r=t.setSelectedEvent,s=t.setReReMarkers,a=Object(c.useState)(n),i=Object(j.a)(a,2),o=i[0],l=i[1],u=Object(c.useState)("All"),d=Object(j.a)(u,2),b=d[0],O=d[1],v=Object(c.useRef)(),h=Object(c.useRef)(),f=function(e){var t=Object(R.a)(e);return"All"!==b&&(t=t.filter((function(e){return e.categories[0].title===b}))),t},x=function(e,t){var n=[],c=f(t);if(e.length>0&&c){for(var r in t){-1!==c[r].title.toLowerCase().indexOf(e)&&n.push(c[r])}0===n.length&&(n=[{title:"No Results!",categories:[{title:""}]}]),l(n)}else l(c)};return Object(c.useEffect)((function(){var e=f(n);s(e),x(v.current.value.toLowerCase(),e)}),[b]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("section",{className:"option-container",children:[Object(y.jsx)("p",{children:"Type:"}),Object(y.jsxs)("select",{ref:h,onChange:function(){O(h.current.value)},children:[Object(y.jsx)("option",{value:"All",children:"All"}),Object(y.jsx)("option",{value:"Wildfires",children:"Wildfires"}),Object(y.jsx)("option",{value:"Severe Storms",children:"Severe Storms"}),Object(y.jsx)("option",{value:"Volcanoes",children:"Volcanoes"}),Object(y.jsx)("option",{value:"Sea and Lake Ice",children:"Sea and Lake Ice"})]})]}),Object(y.jsxs)("section",{className:"search-container",children:[Object(y.jsx)("p",{children:"Search:"}),Object(y.jsx)("input",{type:"text",onKeyUp:function(){var e=v.current.value.toLowerCase();setTimeout((function(){e===v.current.value.toLowerCase()&&x(e,n)}),300)},ref:v})]}),Object(y.jsxs)("table",{className:"search-table",children:[Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{width:"60%"},children:"Title"}),Object(y.jsx)("th",{children:"Type"}),Object(y.jsx)("th",{children:"Location"})]}),o.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.title}),Object(y.jsx)("td",{children:e.categories[0].title}),e.categories[0].title?Object(y.jsx)("td",{children:Object(y.jsx)("a",{href:"#",onClick:function(){r(e)},children:"Click Here"})}):Object(y.jsx)("td",{})]},e.id)}))]})]})};var A=function(){var e=E(),t=e.setEventData,n=e.reRenderMarkers,r=Object(c.useState)(!1),s=Object(j.a)(r,2),a=s[0],i=s[1],u=Object(c.useState)([]),d=Object(j.a)(u,2),b=d[0],O=d[1];return Object(c.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,fetch("https://eonet.sci.gsfc.nasa.gov/api/v2.1/events");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,r=c.events,t(r),O(r),i(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){null!==n&&O(n)}),[n]),Object(y.jsxs)("div",{children:[Object(y.jsx)(L,{}),a?Object(y.jsx)(N,{}):Object(y.jsx)(T,{eventData:b}),!a&&Object(y.jsx)(M,{})]})};a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(I,{children:Object(y.jsx)(A,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a33ed08b.chunk.js.map